{"version":3,"file":"bundle.user.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;;;;;;;;;;;;;;;;;ACxFA;AACO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iCAAiC;AACnD,iBAAiB,mCAAmC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,iBAAiB;AACjB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,iCAAiC;AAC/D,6BAA6B,mCAAmC;AAChE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,YAAY;AAChG,+GAA+G;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,SAAS,MAAM,SAAS;AAClE;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,cAAc;AACd;AACA;AACA,GAAG;AACH;;AAEA;AACO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW,KAAK;;AAE/C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA,+BAA+B,WAAW;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA,mDAAmD,OAAO;;AAE1D;AACA,wCAAwC,OAAO;AAC/C;;;;;;;UC5vBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACNA;AACA;AAC4D;AAK3C;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,+CAAM;AAC5B;AACA,cAAc;AACd,8BAA8B,mBAAmB;AACjD;AACA,wBAAwB,+CAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,YAAY;AACZ;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,2DAAmB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO,yEAAyE,gBAAgB,kBAAkB,UAAU,iBAAiB,WAAW;AAC/K;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,qCAAqC,4BAA4B;AACjE;AACA;AACA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,gEAAgE;AAChE,yBAAyB;AACzB,mDAAmD,kBAAkB,aAAa,UAAU,iBAAiB,cAAc,eAAe,GAAG,cAAc,WAAW;AACtK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,qBAAqB;AACrB;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,gEAAgE;AAChE,yBAAyB;AACzB;AACA;AACA,yBAAyB,aAAa,uBAAuB;AAC7D;AACA,yBAAyB;AACzB;AACA,yBAAyB,0BAA0B,GAAG,EAAE;AACxD,+CAA+C,UAAU,GAAG,UAAU;AACtE,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iCAAiC,IAAI,GAAG;AACxC;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wCAAwC,IAAI,GAAG,8BAA8B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4BAA4B;AACrD;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,yBAAyB;AACzB,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,OAAO,6GAA6G,+BAA+B,aAAa,uBAAuB,iBAAiB,2BAA2B,cAAc,wBAAwB;AAC1S;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA,IAAI,yDAAiB;AACrB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,2DAAmB;AAC7B,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,2DAAmB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,sBAAsB,gCAAgC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,YAAY,kDAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAa;AAC9C;AACA;AACA,UAAU,2DAAmB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,0BAA0B,gCAAgC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gBAAgB,2DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sDAAa;AACpD;AACA;AACA,gBAAgB,2DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC","sources":["webpack://tampermonkey/./src/api.js","webpack://tampermonkey/./src/ui.js","webpack://tampermonkey/webpack/bootstrap","webpack://tampermonkey/webpack/runtime/define property getters","webpack://tampermonkey/webpack/runtime/hasOwnProperty shorthand","webpack://tampermonkey/webpack/runtime/make namespace object","webpack://tampermonkey/./src/main.js"],"sourcesContent":["// src/api.js\r\n\r\nexport async function getAnswer(prompt) {\r\n  return new Promise((resolve, reject) => {\r\n    GM_xmlhttpRequest({\r\n      method: \"POST\",\r\n      url: \"http://localhost:3000/api/process\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      data: JSON.stringify({ prompt }),\r\n      onload: function (response) {\r\n        if (response.status === 200) {\r\n          try {\r\n            const data = JSON.parse(response.responseText);\r\n            resolve(data);\r\n          } catch (e) {\r\n            reject(\"JSON parse error: \" + e);\r\n          }\r\n        } else {\r\n          reject(\"API failed with status: \" + response.status);\r\n        }\r\n      },\r\n      onerror: function (error) {\r\n        reject(\"API error: \" + error);\r\n      },\r\n    });\r\n  });\r\n}\r\n\r\nexport async function getHumanScore(answers) {\r\n  return new Promise((resolve, reject) => {\r\n    GM_xmlhttpRequest({\r\n      method: \"POST\",\r\n      url: \"http://localhost:3000/api/process/human-score\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      data: JSON.stringify({ answers }),\r\n      onload: function (response) {\r\n        if (response.status === 200) {\r\n          try {\r\n            const data = JSON.parse(response.responseText);\r\n            resolve(data);\r\n          } catch (e) {\r\n            reject(\"JSON parse error: \" + e);\r\n          }\r\n        } else {\r\n          reject(\"API failed with status: \" + response.status);\r\n        }\r\n      },\r\n      onerror: function (error) {\r\n        reject(\"API error: \" + error);\r\n      },\r\n    });\r\n  });\r\n}\r\n\r\nexport async function saveDB(question, answer, score) {\r\n  return new Promise((resolve, reject) => {\r\n    GM_xmlhttpRequest({\r\n      method: \"POST\",\r\n      url: \"http://localhost:3000/api/answer\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      data: JSON.stringify({\r\n        question,\r\n        answer,\r\n        score,\r\n      }),\r\n      onload: function (response) {\r\n        if (response.status === 200) {\r\n          try {\r\n            const data = JSON.parse(response.responseText);\r\n            resolve(data);\r\n          } catch (e) {\r\n            reject(\"JSON parse error: \" + e);\r\n          }\r\n        } else {\r\n          reject(\"API failed with status: \" + response.status);\r\n        }\r\n      },\r\n      onerror: function (error) {\r\n        reject(\"API error: \" + error);\r\n      },\r\n    });\r\n  });\r\n}\r\n","// src/ui.js\nexport function displayHumanElement(text, score = null) {\n  const stageFrame = document.getElementById(\"stageFrame\");\n  if (!stageFrame) return;\n\n  // Only create style and container if they don't exist\n  if (!document.querySelector(\"#custom-human-style\")) {\n    const rect = stageFrame.getBoundingClientRect();\n    let style = document.createElement(\"style\");\n    style.id = \"custom-human-style\";\n    style.innerHTML = `\n      .human-container {\n          position: absolute;\n          left: ${rect.right + 20 + window.scrollX}px;\n          top: ${rect.bottom - 120 + window.scrollY}px;\n          z-index: 1000;\n          display: flex;\n          flex-direction: column;\n          background: #141517;\n          padding: 10px;\n          border-radius: 12px;\n          font-size: 14px;\n          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), \n                     inset 0 1px rgba(255, 255, 255, 0.1);\n          width: 150px;\n          height: 100px;\n          text-align: center;\n      }\n      .human-title {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 4px;\n          color: white;\n      }\n      .human-circle-container {\n          position: relative;\n          width: 100px;\n          height: 60px;\n          margin: 0 auto;\n      }\n      .human-circle {\n          fill: transparent;\n          stroke: #006cff;\n          stroke-width: 10;\n          transition: stroke-dashoffset 1.5s ease-in-out;\n      }\n      .human-text {\n          font-size: 40px;\n          font-weight: bold;\n          fill: white;\n      }\n      @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n      }\n      .loading-spinner {\n          animation: spin 1s linear infinite;\n          transform-origin: center;\n      }`;\n    document.head.appendChild(style);\n  }\n\n  let container = document.querySelector(\".human-container\");\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.className = \"human-container\";\n    container.innerHTML = `\n      <div class=\"human-title\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-venetian-mask\">\n              <path d=\"M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a8 8 0 0 0-5 2 8 8 0 0 0-5-2H2Z\"></path>\n              <path d=\"M6 11c1.5 0 3 .5 3 2-2 0-3 0-3-2Z\"></path>\n              <path d=\"M18 11c-1.5 0-3 .5-3 2 2 0 3 0 3-2Z\"></path>\n          </svg>\n          ${text}\n      </div>\n      <div class=\"human-circle-container\">\n          <svg width=\"100\" height=\"60\" viewBox=\"0 0 120 120\" class=\"loading-spinner\">\n              <circle cx=\"60\" cy=\"60\" r=\"48\" stroke=\"white\" stroke-width=\"8\" fill=\"none\" stroke-dasharray=\"75\" stroke-linecap=\"round\"/>\n          </svg>\n          <svg width=\"100\" height=\"60\" viewBox=\"0 0 120 120\" style=\"display: none;\" class=\"score-display\">\n              <circle class=\"human-circle\" cx=\"60\" cy=\"60\" r=\"48\" stroke-dasharray=\"301.59\" stroke-dashoffset=\"301.59\" transform=\"rotate(-90 60 60)\"/>\n              <text x=\"60\" y=\"60\" text-anchor=\"middle\" dominant-baseline=\"middle\" class=\"human-text\">0</text>\n          </svg>\n      </div>`;\n    document.body.appendChild(container);\n  }\n\n  // Add resize event listener to update position\n  const updatePosition = () => {\n    const rect = stageFrame.getBoundingClientRect();\n    container.style.left = `${rect.right + 20 + window.scrollX}px`;\n    container.style.top = `${rect.bottom - 100 + window.scrollY}px`;\n  };\n\n  // Add resize and scroll event listeners\n  window.addEventListener(\"resize\", updatePosition);\n  window.addEventListener(\"scroll\", updatePosition);\n\n  // Update display and animate when score is provided\n  if (score !== null) {\n    const loadingSpinner = container.querySelector(\".loading-spinner\");\n    const scoreDisplay = container.querySelector(\".score-display\");\n    const progressCircle = container.querySelector(\".human-circle\");\n    const scoreText = container.querySelector(\".human-text\");\n\n    loadingSpinner.style.display = \"none\";\n    scoreDisplay.style.display = \"block\";\n    scoreText.textContent = score;\n\n    // Animate the circle with a smooth transition\n    const circumference = 2 * Math.PI * 48; // 2πr where r=48\n    const offset = circumference - (score / 100) * circumference;\n    progressCircle.style.strokeDasharray = circumference;\n    progressCircle.style.strokeDashoffset = circumference;\n\n    // Trigger reflow to ensure transition works\n    progressCircle.getBoundingClientRect();\n    progressCircle.style.strokeDashoffset = offset;\n  }\n}\n/**\n * Creates and inserts a draggable menu into the DOM.\n * @param {Function} onStartCallback - Callback function that receives the configuration object:\n * {\n *   isActive: boolean,\n *   submitDelay: { min: number, max: number },\n *   answerDelay: number,\n *   typingStyle: string\n * }\n */\nexport function initDraggableMenu(onStartCallback) {\n  // 1. CREATE THE MENU CONTAINER\n  const menu = document.createElement(\"div\");\n  menu.id = \"autoWritingMenu\";\n  menu.innerHTML = `\n    <div class=\"menu-header\">\n      <div class=\"menu-title\">REVOLT | BETA</div>\n    </div>\n    <div class=\"menu-items\">\n      <div class=\"menu-item\" id=\"autoWritingItem\">\n        <button class=\"menu-item-button\">\n          <div class=\"button-content\">\n            <div class=\"settings-icon\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\n              </svg>\n            </div>\n            <span class=\"button-text\">Auto writing</span>\n          </div>\n        </button>\n        <div class=\"menu-item-content\" style=\"display: none;\">\n          <div class=\"menu-body\">\n            <div class=\"menu-row\">\n              <label>Submit delay:</label>\n              <div class=\"input-group\" style=\"width: 100%;\">\n                <div class=\"input-with-unit\">\n                  <input type=\"number\" min=\"0\" step=\"1\" value=\"0\" id=\"submitDelay1\">\n                  <span class=\"input-unit\">sec</span>\n                </div>\n                <span>-</span>\n                <div class=\"input-with-unit\">\n                  <input type=\"number\" min=\"0\" step=\"1\" value=\"0\" id=\"submitDelay2\">\n                  <span class=\"input-unit\">sec</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"menu-row\">\n              <label>Answer delay:</label>\n              <div class=\"typing-dropdown answer-delay-dropdown\" style=\"width: 100% !important;\">\n                <button class=\"dropdown-btn\" id=\"answerDelayBtn\">None</button>\n                <div class=\"dropdown-content\">\n                  <div class=\"dropdown-option\" data-value=\"none\">None</div>\n                  <div class=\"dropdown-option\" data-value=\"custom\">Custom</div>\n                </div>\n              </div>\n              <div class=\"input-with-unit custom-delay-input\" style=\"display: none; width: 60px;\">\n                <input type=\"number\" min=\"0\" step=\"1\" value=\"0\" id=\"answerDelay\" style=\"width: 60px !important;\">\n                <span class=\"input-unit\">wpm</span>\n              </div>\n            </div>\n            <div class=\"menu-row\">\n              <label>Typing Style:</label>\n              <div class=\"typing-dropdown\">\n                <button class=\"dropdown-btn\" id=\"typingStyleBtn\">None</button>\n                <div class=\"dropdown-content\">\n                  <div class=\"dropdown-option\" data-value=\"default\">None</div>\n                  <div class=\"dropdown-option\" data-value=\"level1\">Level 1</div>\n                  <div class=\"dropdown-option\" data-value=\"level2\">Level 2</div>\n                  <div class=\"dropdown-option\" data-value=\"level3\">Level 3</div>\n                </div>\n              </div>\n            </div>\n            <div class=\"menu-row\">\n              <label>Placeholder:</label>\n              <div class=\"typing-dropdown\">\n                <button class=\"dropdown-btn\" id=\"placeholderBtn\">None</button>\n                <div class=\"dropdown-content\">\n                  <div class=\"dropdown-option\" data-value=\"default\">None</div>\n                  <div class=\"dropdown-option\" data-value=\"enabled\">Enabled</div>\n                  <div class=\"dropdown-option\" data-value=\"disabled\">Disabled</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"menu-item\" id=\"examUnlockerItem\">\n        <button class=\"menu-item-button\">\n          <div class=\"button-content\">\n            <div class=\"unlock-icon\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n              </svg>\n            </div>\n            <span class=\"button-text\">Exam unlocker</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  `;\n  document.body.appendChild(menu);\n\n  // 2. ADD STYLES\n  const style = document.createElement(\"style\");\n  style.textContent = `\n    #autoWritingMenu {\n      position: fixed;\n      top: 100px;\n      left: 100px;\n      width: 320px;\n      background: #141517;\n      border-radius: 12px;\n      font-family: 'Poppins', system-ui, -apple-system, sans-serif;\n      z-index: 999999;\n      cursor: default;\n      color: white;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n    }\n\n    .menu-header {\n      background: #222324;\n      padding: 15px 20px;\n      user-select: none;\n      border-radius: 12px 12px 0 0;\n    }\n\n    .menu-title {\n      color: white;\n      font-size: 24px;\n      font-weight: 800;\n    }\n\n    .menu-items {\n      padding: 10px;\n    }\n\n    .menu-item {\n      margin-bottom: 8px;\n    }\n\n    .menu-item-button {\n      width: 100%;\n      padding: 10px 15px;\n      background: #242526;\n      border: none;\n      border-radius: 6px;\n      color: white;\n      font-family: 'Poppins', system-ui, -apple-system, sans-serif;\n      font-size: 15px;\n      font-weight: 600;\n      text-align: left;\n      cursor: pointer;\n      transition: background 0.2s;\n    }\n\n    .menu-item-button:hover {\n      background: #2a2b2c;\n    }\n\n    .menu-body {\n      padding: 15px;\n      background: #1a1b1c;\n      border-radius: 6px;\n      margin-top: 8px;\n    }\n\n    .menu-row {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      margin-bottom: 12px;\n      height: 32px;\n    }\n\n    .menu-row label {\n      min-width: 100px;\n      color: white;\n      font-size: 15px;\n      font-weight: 600;\n      opacity: 0.9;\n    }\n\n    .input-group {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    }\n\n    .input-with-unit {\n      position: relative;\n      width: 60px;\n    }\n\n    input[type=\"number\"] {\n      width: 100%;\n      height: 28px;\n      padding: 0 25px 0 8px;\n      background: #242526;\n      border: none;\n      border-radius: 4px;\n      color: white;\n      font-family: 'Poppins', system-ui, -apple-system, sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      -moz-appearance: textfield;\n    }\n\n    input[type=\"number\"]::-webkit-outer-spin-button,\n    input[type=\"number\"]::-webkit-inner-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n\n    .input-unit {\n      position: absolute;\n      right: 8px;\n      top: 50%;\n      transform: translateY(-50%);\n      color: rgba(255, 255, 255, 0.6);\n      font-size: 10px;\n      pointer-events: none;\n    }\n\n    .typing-dropdown {\n      position: relative;\n      width: 100%;\n    }\n\n    .dropdown-btn {\n      width: 100%;\n      height: 28px;\n      padding: 0 10px;\n      background: #242526;\n      border: none;\n      border-radius: 4px;\n      color: white;\n      font-family: 'Poppins', system-ui, -apple-system, sans-serif;\n      font-size: 15px;\n      font-weight: 600;\n      text-align: left;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    }\n\n    .dropdown-btn::after {\n      content: '▼';\n      font-size: 10px;\n      opacity: 0.7;\n    }\n\n    .dropdown-content {\n      position: absolute;\n      top: 100%;\n      left: 0;\n      width: 100%;\n      background: #242526;\n      border-radius: 4px;\n      margin-top: 4px;\n      display: none;\n      z-index: 1;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3),\n                  0 0 0 1px rgba(255, 255, 255, 0.05);\n      border: 1px solid rgba(255, 255, 255, 0.1);\n      overflow: hidden;\n    }\n\n    .dropdown-option {\n      padding: 8px 10px;\n      color: white;\n      font-size: 15px;\n      font-weight: 600;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n    }\n\n    .dropdown-option:last-child {\n      border-bottom: none;\n    }\n\n    .dropdown-option:hover {\n      background: #2a2b2c;\n      padding-left: 15px;\n    }\n\n    .typing-dropdown.active .dropdown-content {\n      display: block;\n    }\n\n    .custom-delay-input {\n      transition: all 0.3s ease;\n    }\n\n    .button-content {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n      width: 100%;\n    }\n\n    .settings-icon,\n    .unlock-icon {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 24px;\n      height: 24px;\n      border-radius: 4px;\n      transition: all 0.2s ease;\n      color: rgba(255, 255, 255, 0.7);\n    }\n\n    .settings-icon:hover,\n    .unlock-icon:hover {\n      background: rgba(255, 255, 255, 0.1);\n      color: white;\n    }\n\n    .button-text {\n      flex: 1;\n    }\n  `;\n  document.head.appendChild(style);\n\n  // 3. ADD EVENT LISTENERS\n  const autoWritingItem = document.getElementById(\"autoWritingItem\");\n  const autoWritingButton = autoWritingItem.querySelector(\".menu-item-button\");\n  const settingsIcon = autoWritingItem.querySelector(\".settings-icon\");\n  const autoWritingContent =\n    autoWritingItem.querySelector(\".menu-item-content\");\n\n  // Toggle menu content\n  settingsIcon.addEventListener(\"click\", () => {\n    const isExpanded = autoWritingContent.style.display !== \"none\";\n    autoWritingContent.style.display = isExpanded ? \"none\" : \"block\";\n    autoWritingButton.style.background = isExpanded ? \"#242526\" : \"#2a2b2c\";\n  });\n\n  // Button click handler (excluding settings icon) - start auto writing\n  autoWritingButton.addEventListener(\"click\", (e) => {\n    if (e.target.closest(\".settings-icon\")) {\n      return; // Ignore if clicking on settings icon\n    }\n\n    const submitDelay1 = document.querySelector(\"#submitDelay1\");\n    const submitDelay2 = document.querySelector(\"#submitDelay2\");\n    const answerDelay = document.querySelector(\"#answerDelay\");\n    const answerDelayBtn = document.querySelector(\"#answerDelayBtn\");\n    const typingStyleBtn = document.querySelector(\"#typingStyleBtn\");\n\n    // Validate configuration\n    if (\n      (submitDelay1.value === \"0\" && submitDelay2.value === \"0\") ||\n      parseInt(submitDelay1.value) > parseInt(submitDelay2.value)\n    ) {\n      alert(\"Error at submit delay\");\n      return;\n    }\n\n    if (\n      answerDelay.value === \"0\" &&\n      answerDelayBtn.textContent.trim() === \"Custom\"\n    ) {\n      alert(\"Error at answer delay\");\n      return;\n    }\n\n    // Toggle active state\n    autoWritingButton.classList.toggle(\"active\");\n\n    // Collect configuration data\n    const config = {\n      isActive: autoWritingButton.classList.contains(\"active\"),\n      submitDelay: {\n        min: parseInt(submitDelay1.value) || 0,\n        max: parseInt(submitDelay2.value) || 0,\n      },\n      answerDelay: parseInt(answerDelay.value) || 0,\n      typingStyle: typingStyleBtn.textContent.trim(),\n      placeholder: document.querySelector(\"#placeholderBtn\").textContent.trim(),\n    };\n\n    // Call the callback with the configuration\n    if (typeof onStartCallback === \"function\") {\n      onStartCallback(config);\n    }\n  });\n\n  // Add dropdown functionality\n  const dropdowns = menu.querySelectorAll(\".typing-dropdown\");\n  dropdowns.forEach((dropdown) => {\n    const btn = dropdown.querySelector(\".dropdown-btn\");\n    const options = dropdown.querySelectorAll(\".dropdown-option\");\n\n    btn.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      dropdowns.forEach((d) => {\n        if (d !== dropdown) d.classList.remove(\"active\");\n      });\n      dropdown.classList.toggle(\"active\");\n    });\n\n    options.forEach((option) => {\n      option.addEventListener(\"click\", (e) => {\n        e.stopPropagation();\n        const selectedValue = option.getAttribute(\"data-value\");\n        btn.textContent = option.textContent;\n        dropdown.classList.remove(\"active\");\n\n        if (dropdown.classList.contains(\"answer-delay-dropdown\")) {\n          const customDelayInput = menu.querySelector(\".custom-delay-input\");\n          if (selectedValue === \"custom\") {\n            customDelayInput.style.display = \"block\";\n          } else {\n            customDelayInput.style.display = \"none\";\n            document.querySelector(\"#answerDelay\").value = \"0\";\n          }\n        }\n      });\n    });\n  });\n\n  // Close dropdowns when clicking outside\n  document.addEventListener(\"click\", () => {\n    dropdowns.forEach((dropdown) => dropdown.classList.remove(\"active\"));\n  });\n\n  // Make menu draggable\n  const header = menu.querySelector(\".menu-header\");\n  let isDragging = false;\n  let currentX;\n  let currentY;\n  let initialX;\n  let initialY;\n  let xOffset = 0;\n  let yOffset = 0;\n\n  header.addEventListener(\"mousedown\", (e) => {\n    initialX = e.clientX - xOffset;\n    initialY = e.clientY - yOffset;\n    isDragging = true;\n  });\n\n  document.addEventListener(\"mousemove\", (e) => {\n    if (isDragging) {\n      e.preventDefault();\n      currentX = e.clientX - initialX;\n      currentY = e.clientY - initialY;\n      xOffset = currentX;\n      yOffset = currentY;\n      menu.style.transform = `translate(${currentX}px, ${currentY}px)`;\n    }\n  });\n\n  document.addEventListener(\"mouseup\", () => {\n    isDragging = false;\n  });\n\n  // Add event listener for exam unlocker\n  const examUnlockerItem = document.getElementById(\"examUnlockerItem\");\n  const examUnlockerButton =\n    examUnlockerItem.querySelector(\".menu-item-button\");\n  const unlockIcon = examUnlockerItem.querySelector(\".unlock-icon\");\n\n  unlockIcon.addEventListener(\"click\", (e) => {\n    e.stopPropagation();\n    // Add your unlock icon click handler here\n  });\n\n  examUnlockerButton.addEventListener(\"click\", (e) => {\n    if (e.target.closest(\".unlock-icon\")) {\n      return; // Ignore if clicking on unlock icon\n    }\n    // Add your exam unlocker button click handler here\n  });\n}\n\n// Add this new function\nexport function displayLessonNumber(number) {\n  const lessonTitle = document.getElementById(\"lessonInfo\");\n  if (!lessonTitle) return;\n\n  // Get the width of the lesson title\n  const titleWidth = lessonTitle.offsetWidth;\n  console.log(\"Title Width\", titleWidth);\n\n  // Add styles if they don't exist\n  if (!document.getElementById(\"lesson-number-style\")) {\n    const style = document.createElement(\"style\");\n    style.id = \"lesson-number-style\";\n    style.textContent = `\n      .lesson-number-container {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        z-index: 999999;\n        animation: fadeIn 0.3s ease-out;\n        height: 120px;\n        width: ${titleWidth}px;\n        margin: 0 auto;\n        font-family: 'Poppins', system-ui, -apple-system, sans-serif;\n      }\n\n      .lesson-number {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: flex-start;\n        width: 100%;\n        font-size: 15px;\n        font-weight: 600;\n        padding: 8px 12px;\n        background: #141517;\n        border: 1px solid rgba(0, 108, 255, 0.1);\n        border-radius: 12px;\n        color: white;\n        font-family: 'Poppins', system-ui, -apple-system, sans-serif;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n        box-sizing: border-box;\n        height: 80px;\n        position: relative;\n      }\n\n      .progress-bar {\n        position: relative;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: #242526;\n        border-radius: 10px;\n      }\n\n      .progress-text {\n        margin-top: 8px;\n        font-size: 13px;\n        opacity: 0.9;\n      }\n\n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      .progress-bar::before {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        height: 10px;\n        width: 100%;\n        background: #242526;\n        border-radius: 10px;\n      }\n\n      .progress-bar::after {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 0;\n        transform: translateY(-50%);\n        height: 10px;\n        width: 0%;\n        background: #006cff;\n        animation: fillBar 1s ease-out forwards;\n        border-radius: 10px;\n        box-shadow: 0 0 10px rgba(0, 108, 255, 0.3);\n      }\n\n      @keyframes fillBar {\n        from {\n          width: 0%;\n        }\n        to {\n          width: calc(100% * var(--progress) / 100);\n        }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  // Create or update the number element\n  let container = document.querySelector(\".lesson-number-container\");\n  if (!container) {\n    container = document.createElement(\"div\");\n    container.className = \"lesson-number-container\";\n    container.style.width = `${titleWidth}px`; // Set width dynamically\n\n    const numberElement = document.createElement(\"span\");\n    numberElement.className = \"lesson-number\";\n\n    const progressBar = document.createElement(\"div\");\n    progressBar.className = \"progress-bar\";\n\n    const progressText = document.createElement(\"div\");\n    progressText.className = \"progress-text\";\n\n    numberElement.appendChild(progressBar);\n    numberElement.appendChild(progressText);\n    container.appendChild(numberElement);\n\n    document.body.appendChild(container);\n  } else {\n    // Update container width if lesson title width changes\n    container.style.width = `${titleWidth}px`;\n  }\n\n  // Create ResizeObserver to watch lessonInfo element width changes\n  const lessonInfo = document.getElementById(\"lessonInfo\");\n  if (lessonInfo) {\n    const resizeObserver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        const lessonInfoWidth = entry.contentRect.width;\n        container.style.width = `${lessonInfoWidth}px`;\n      }\n    });\n    resizeObserver.observe(lessonInfo);\n  }\n\n  // Update the number with animation\n  const numberElement = container.querySelector(\".lesson-number\");\n  const progressText = numberElement.querySelector(\".progress-text\");\n\n  numberElement.style.animation = \"none\";\n  numberElement.offsetHeight; // Trigger reflow\n  numberElement.style.animation = \"fadeIn 0.3s ease-out\";\n\n  // Set the progress percentage as a CSS variable\n  numberElement.style.setProperty(\"--progress\", `${number}`);\n\n  // Update progress text\n  progressText.textContent = `You are ${number}% completed`;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// src/main.js\r\n\r\nimport { getAnswer, getHumanScore, saveDB } from \"./api.js\";\r\nimport {\r\n  displayHumanElement,\r\n  initDraggableMenu,\r\n  displayLessonNumber,\r\n} from \"./ui.js\";\r\n\r\n(function () {\r\n  \"use strict\";\r\n\r\n  let stop = false,\r\n    interval,\r\n    config = {};\r\n\r\n  function getStageFrame() {\r\n    return document.getElementById(\"stageFrame\")\r\n      ? document.getElementById(\"stageFrame\")\r\n      : null;\r\n  }\r\n\r\n  function submitWriting(submitBtn, questions, answers, scores) {\r\n    submitBtn.click();\r\n    console.log(\"Clicked!!!!\");\r\n\r\n    setTimeout(async () => {\r\n      const gradeBar = document.getElementById(\"lessonInfo\");\r\n      const value = gradeBar.querySelectorAll('thspan[data-rwthpgen=\"1\"]');\r\n      console.log(\"Length:\", value.length, value);\r\n      if (value.length === 4) {\r\n        const number = value[2];\r\n        console.log(\"gradeBar:\", gradeBar, number);\r\n        if (number.textContent.trim() === \"100\") {\r\n          console.log(\"Answers:\", answers);\r\n          console.log(\"Scores:\", scores);\r\n\r\n          if (scores) {\r\n            if (typeof scores === \"number\") {\r\n              if (scores >= 90) {\r\n                await saveDB(questions, answers, scores);\r\n              }\r\n            } else {\r\n              for (let i = 0; i < scores.length; i++) {\r\n                if (scores[i] >= 90) {\r\n                  await saveDB(questions[i], answers[i], scores[i]);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }, 15000);\r\n  }\r\n\r\n  // Helper functions for humanized typing\r\n  function createTypingMistake(word, typingStyle) {\r\n    const mistakeTypes = {\r\n      swap: (w) => {\r\n        if (w.length < 2) return w;\r\n        const i = Math.floor(Math.random() * (w.length - 1));\r\n        return w.slice(0, i) + w[i + 1] + w[i] + w.slice(i + 2);\r\n      },\r\n      typo: (w) => {\r\n        const nearby = {\r\n          a: \"sq\",\r\n          b: \"vn\",\r\n          c: \"xv\",\r\n          d: \"sf\",\r\n          e: \"wr\",\r\n          f: \"dg\",\r\n          g: \"fh\",\r\n          h: \"gj\",\r\n          i: \"uo\",\r\n          j: \"hk\",\r\n          k: \"jl\",\r\n          l: \"k\",\r\n          m: \"n\",\r\n          n: \"bm\",\r\n          o: \"ip\",\r\n          p: \"o\",\r\n          q: \"a\",\r\n          r: \"et\",\r\n          s: \"ad\",\r\n          t: \"ry\",\r\n          u: \"yi\",\r\n          v: \"bc\",\r\n          w: \"e\",\r\n          x: \"c\",\r\n          y: \"tu\",\r\n          z: \"\",\r\n        };\r\n        if (w.length < 1) return w;\r\n        const i = Math.floor(Math.random() * w.length);\r\n        const char = w[i].toLowerCase();\r\n        const typoChar = nearby[char]\r\n          ? nearby[char][Math.floor(Math.random() * nearby[char].length)]\r\n          : char;\r\n        return w.slice(0, i) + typoChar + w.slice(i + 1);\r\n      },\r\n      shuffle: (w) =>\r\n        w\r\n          .split(\"\")\r\n          .sort(() => Math.random() - 0.5)\r\n          .join(\"\"),\r\n    };\r\n\r\n    const mistakeType =\r\n      typingStyle === \"Level 1\"\r\n        ? \"swap\"\r\n        : typingStyle === \"Level 2\"\r\n        ? \"typo\"\r\n        : \"shuffle\";\r\n    console.log(\"Mistake Type:\", mistakeType);\r\n    return mistakeTypes[mistakeType](word);\r\n  }\r\n\r\n  async function createTypingAnimation(editor, text, config, onComplete) {\r\n    const words = text.split(\" \");\r\n    let currentIndex = 0;\r\n    editor.setData(\"\");\r\n\r\n    const msPerWord = (60 * 1000) / (config.answerDelay || 30); // Default to 30 WPM if not set\r\n    const typingStyle = config.typingStyle;\r\n    const placeholderEnabled = config.placeholder === \"Enabled\";\r\n    const placeholderText =\r\n      \"This topic has many sides to consider, each offering unique insights required to understand.\";\r\n\r\n    // Skip placeholder if this is a placeholder typing call\r\n    const isPlaceholderCall = text === placeholderText;\r\n\r\n    const typeText = async (textToType, isPlaceholder = false) => {\r\n      return new Promise((resolve) => {\r\n        let wordIndex = 0;\r\n        const words = textToType.split(\" \");\r\n\r\n        const typeWord = () => {\r\n          if (wordIndex < words.length) {\r\n            let word = words[wordIndex];\r\n            let letterIndex = 0;\r\n            const letters = word.split(\"\");\r\n            let mistakeMode = false;\r\n            let mistakeText = \"\";\r\n            let backspacing = false;\r\n\r\n            const typeLetter = () => {\r\n              if (backspacing) {\r\n                if (mistakeText.length > 0) {\r\n                  mistakeText = mistakeText.slice(0, -1);\r\n                  let baseText =\r\n                    wordIndex === 0\r\n                      ? \"\"\r\n                      : words.slice(0, wordIndex).join(\" \") + \" \";\r\n                  editor.setData(baseText + mistakeText);\r\n                  setTimeout(typeLetter, msPerWord / word.length);\r\n                } else {\r\n                  backspacing = false;\r\n                  mistakeMode = false;\r\n                  letterIndex = 0;\r\n                  setTimeout(typeLetter, msPerWord / word.length);\r\n                }\r\n                return;\r\n              }\r\n\r\n              // Only make typing mistakes for actual answer, not placeholder\r\n              if (!isPlaceholder && !mistakeMode && letterIndex === 0) {\r\n                const mistakeChance =\r\n                  {\r\n                    \"Level 1\": 0.1,\r\n                    \"Level 2\": 0.25,\r\n                    \"Level 3\": 0.4,\r\n                  }[typingStyle] || 0;\r\n\r\n                mistakeMode = Math.random() < mistakeChance;\r\n                if (mistakeMode) {\r\n                  mistakeText = createTypingMistake(word);\r\n                }\r\n              }\r\n\r\n              if (\r\n                letterIndex <\r\n                (mistakeMode ? mistakeText.length : letters.length)\r\n              ) {\r\n                let baseText =\r\n                  wordIndex === 0\r\n                    ? \"\"\r\n                    : words.slice(0, wordIndex).join(\" \") + \" \";\r\n                let currentWord = mistakeMode\r\n                  ? mistakeText.slice(0, letterIndex + 1)\r\n                  : letters.slice(0, letterIndex + 1).join(\"\");\r\n\r\n                editor.setData(baseText + currentWord);\r\n                letterIndex++;\r\n\r\n                if (mistakeMode && letterIndex === mistakeText.length) {\r\n                  backspacing = true;\r\n                  setTimeout(typeLetter, msPerWord / 2);\r\n                  return;\r\n                }\r\n\r\n                setTimeout(typeLetter, msPerWord / word.length);\r\n              } else {\r\n                let completeText =\r\n                  words.slice(0, wordIndex).join(\" \") +\r\n                  (wordIndex > 0 ? \" \" : \"\") +\r\n                  (mistakeMode ? mistakeText : word);\r\n\r\n                editor.setData(completeText);\r\n                wordIndex++;\r\n                setTimeout(typeWord, msPerWord);\r\n              }\r\n            };\r\n\r\n            typeLetter();\r\n          } else {\r\n            resolve();\r\n          }\r\n        };\r\n\r\n        typeWord();\r\n      });\r\n    };\r\n\r\n    const deletePlaceholder = async () => {\r\n      return new Promise((resolve) => {\r\n        let text = editor.getData();\r\n        const deleteChar = () => {\r\n          if (text.length > 0) {\r\n            text = text.slice(0, -1);\r\n            editor.setData(text);\r\n            setTimeout(deleteChar, msPerWord / 10); // Faster deletion\r\n          } else {\r\n            resolve();\r\n          }\r\n        };\r\n        deleteChar();\r\n      });\r\n    };\r\n\r\n    const startTyping = async () => {\r\n      // Only handle placeholder if this is not a placeholder typing call\r\n      if (placeholderEnabled && !isPlaceholderCall) {\r\n        await typeText(placeholderText, true);\r\n        await new Promise((resolve) => setTimeout(resolve, 2000));\r\n        await deletePlaceholder();\r\n        await new Promise((resolve) => setTimeout(resolve, 1000));\r\n      }\r\n\r\n      // Type the main text\r\n      await typeText(text, isPlaceholderCall);\r\n\r\n      if (onComplete) onComplete();\r\n    };\r\n\r\n    // Start the typing process\r\n    setTimeout(() => {\r\n      startTyping();\r\n    }, 2000);\r\n  }\r\n\r\n  async function activateAutomaticWriting() {\r\n    let matchingEnrollment;\r\n    console.log(\"Get started!!!~~~~~~~~~~~!!!\");\r\n\r\n    const lms_base_url = initialization?.InitialLaunchData?.LMSAPIBasePath;\r\n    const prefix = lms_base_url.split(\"//\")[1].split(\".\")[0];\r\n    console.log(\"lms_base_url:\", prefix);\r\n\r\n    const session_user_id = initialization?.InitialLaunchData?.UserID;\r\n    console.log(\"Session User ID:\", session_user_id);\r\n\r\n    const cookie_user_id = initialization?.pk;\r\n    console.log(\"Cookie User ID:\", cookie_user_id);\r\n\r\n    // Get course name from the span element\r\n    const courseName = initialization?.InitialLaunchData?.CourseName;\r\n    console.log(\"Course name:\", courseName);\r\n\r\n    displayLessonNumber(initialization?.InitialActivityData?.Progress);\r\n\r\n    // Get next activity data\r\n    // Add click event listener to Next Activity button\r\n    const nextActivityButton = document.querySelector(\"a.footnav.goRight\");\r\n    if (nextActivityButton) {\r\n      nextActivityButton.addEventListener(\"click\", async () => {\r\n        console.log(\"Next Activity Button clicked!!!!\");\r\n        try {\r\n          console.log(\"Fetching next activity data...\");\r\n\r\n          const activityId = initialization?.InitialActivityData?.ActivityOrder;\r\n          console.log(\"Activity ID:\", activityId);\r\n          const ContextID = initialization?.InitialLaunchData?.ContextID;\r\n          console.log(\"Context ID:\", ContextID);\r\n\r\n          const nextActivityResponse = await fetch(\r\n            `https://${prefix}.core.learn.edgenuity.com/lmsapi/req/navigation/getnextactivity?UserID=${session_user_id}&StudentBuildID=${ContextID}&ActivityOrder=${activityId}&IsSSLimited=False&AllowPretestsAndQuizzes=False`,\r\n            {\r\n              method: \"GET\",\r\n              credentials: \"include\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n              },\r\n            }\r\n          );\r\n\r\n          if (!nextActivityResponse.ok) {\r\n            throw new Error(\r\n              `HTTP error! status: ${nextActivityResponse.status}`\r\n            );\r\n          }\r\n\r\n          const nextActivityData = await nextActivityResponse.json();\r\n          const { IsRestrictedActivity } = nextActivityData?.Navigation;\r\n          console.log(\"Is Restricted:\", IsRestrictedActivity);\r\n\r\n          if (IsRestrictedActivity) {\r\n            // Add brilliant shadow border if activity is restricted\r\n            let waitForContainer;\r\n            const intervalFunc = () => {\r\n              const stageFrame = getStageFrame();\r\n              const overlayContainers =\r\n                stageFrame?.contentWindow.document.querySelectorAll(\r\n                  \".overlay-attempt\"\r\n                );\r\n              const overlayContainer = Array.from(overlayContainers).find(\r\n                (container) =>\r\n                  container.querySelector(\r\n                    \".overlay-attempt-button.overlay-attempt-button-lock\"\r\n                  )\r\n              );\r\n              if (overlayContainer) {\r\n                overlayContainer.style.cursor = \"pointer\";\r\n                overlayContainer.style.border =\r\n                  \"2px solid rgba(255, 215, 0, 0.7)\";\r\n                overlayContainer.style.transition = \"all 0.3s ease\";\r\n\r\n                overlayContainer.addEventListener(\"mouseenter\", () => {\r\n                  overlayContainer.style.boxShadow =\r\n                    \"0 0 20px 10px rgba(255, 215, 0, 0.7)\";\r\n                });\r\n\r\n                overlayContainer.addEventListener(\"mouseleave\", () => {\r\n                  overlayContainer.style.boxShadow = \"none\";\r\n                });\r\n\r\n                overlayContainer.addEventListener(\"click\", () => {\r\n                  overlayContainer.style.transform = \"scale(0.95)\";\r\n                  overlayContainer.style.boxShadow =\r\n                    \"0 0 30px 15px rgba(255, 215, 0, 0.9)\";\r\n                  setTimeout(() => {\r\n                    overlayContainer.style.transform = \"scale(1)\";\r\n                    overlayContainer.style.boxShadow = \"none\";\r\n                  }, 200);\r\n                });\r\n                overlayContainer.onclick = async () => {\r\n                  console.log(\r\n                    \"Initial Activity Order:\",\r\n                    initialization?.InitialActivityData?.ActivityOrder\r\n                  );\r\n\r\n                  // window.parent.Namespace.global().playerView.startActivity(\r\n                  //   initialization?.InitialActivityData?.ActivityOrder,\r\n                  //   function (warning) {\r\n                  //     if (warning == \"NOATTEMPT\")\r\n                  //       window.parent.Namespace.global()\r\n                  //         .playerView.stageView()\r\n                  //         .loadUrl(\r\n                  //           window.parent.Namespace.global().services.overlay\r\n                  //             .basepath +\r\n                  //             \"?errormessage=\" +\r\n                  //             encodeURIComponent(\r\n                  //               \"You do not have any retakes available for this Assessment.\"\r\n                  //             )\r\n                  //         );\r\n                  //   }\r\n                  // );\r\n\r\n                  const loadQuestion = async (\r\n                    id,\r\n                    parsedAnswers,\r\n                    ActivityKeys\r\n                  ) => {\r\n                    const parser = new DOMParser();\r\n                    let learningObjectKey = ActivityKeys.learningObjectKey;\r\n                    let resultKey = ActivityKeys.resultKey;\r\n                    let enrollmentKey = ActivityKeys.enrollmentKey;\r\n                    let sessionKey = ActivityKeys.sessionKey;\r\n\r\n                    return fetch(\r\n                      `https://${prefix}.core.learn.edgenuity.com/ContentViewers/AssessmentViewer/LoadQuestion`,\r\n                      {\r\n                        headers: {\r\n                          \"content-type\":\r\n                            \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n                        },\r\n                        body: `learningObjectKey=${learningObjectKey}&resultKey=${resultKey}&enrollmentKey=${enrollmentKey}&questionKey=${id}&sessionKey=${sessionKey}`,\r\n                        method: \"POST\",\r\n                      }\r\n                    )\r\n                      .then((res) => res.json())\r\n                      .then((res) => {\r\n                        const html = parser.parseFromString(\r\n                          res.html,\r\n                          \"text/html\"\r\n                        );\r\n\r\n                        let inputSelector =\r\n                          \".Practice_Question_Body .answer-choice input\";\r\n                        let selectSelector =\r\n                          \".Practice_Question_Body select option\";\r\n                        let inputTextSelector = \"input[type='text']\";\r\n\r\n                        let inputs = Array.from(\r\n                          html.querySelectorAll(inputSelector)\r\n                        ).map((li) => [li.name, li.value]);\r\n                        console.log(\"Inputs:\", inputs);\r\n                        let selects = Array.from(\r\n                          html.querySelectorAll(selectSelector)\r\n                        )\r\n                          .map((option) => {\r\n                            if (option.hasAttribute(\"value\")) {\r\n                              return [option.parentElement.name, option.value];\r\n                            }\r\n                          })\r\n                          .filter(Boolean);\r\n                        let inputTexts = Array.from(\r\n                          html.querySelectorAll(inputTextSelector)\r\n                        ).map((input) => [input.name, \"FILL_WITH_TEXT\"]);\r\n                        // console.log(\"YO BITH\", inputs, selects, inputTexts);\r\n\r\n                        let answers = inputs.concat(selects).concat(inputTexts);\r\n                        let correctAnswers = parsedAnswers.filter((x) =>\r\n                          x.question_id.includes(id)\r\n                        );\r\n\r\n                        return changeQuestionAnswer(\r\n                          answers,\r\n                          id,\r\n                          correctAnswers,\r\n                          ActivityKeys\r\n                        );\r\n                      });\r\n                  };\r\n\r\n                  const changeQuestionAnswer = async (\r\n                    answers,\r\n                    id,\r\n                    correctAnswers,\r\n                    ActivityKeys\r\n                  ) => {\r\n                    // console.log(answers, id, correctAnswers);\r\n\r\n                    let answerToChange = [];\r\n                    answers.find((answer) => {\r\n                      correctAnswers.forEach((correctAnswer) => {\r\n                        if (correctAnswer.question_id.includes(answer[1])) {\r\n                          answerToChange.push([answer[0], answer[1]]);\r\n                        } else if (\r\n                          answer[1] == \"on\" &&\r\n                          correctAnswer.question_id == answer[0]\r\n                        ) {\r\n                          answerToChange.push([answer[0], answer[1]]);\r\n                        } else if (answer[1] == \"FILL_WITH_TEXT\") {\r\n                          answerToChange.push([\r\n                            answer[0],\r\n                            correctAnswer.optional_data\r\n                              .trim()\r\n                              .replace(/\"/g, \"\"),\r\n                          ]);\r\n                        }\r\n                      });\r\n                    });\r\n\r\n                    return fetch(\r\n                      `https://${prefix}.core.learn.edgenuity.com/ContentViewers/AssessmentViewer/ChangeQuestionAnswer`,\r\n                      {\r\n                        headers: {\r\n                          \"content-type\":\r\n                            \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n                        },\r\n                        body: `learningObjectKey=${\r\n                          ActivityKeys.learningObjectKey\r\n                        }&resultKey=${ActivityKeys.resultKey}&enrollmentKey=${\r\n                          ActivityKeys.enrollmentKey\r\n                        }&sessionKey=${\r\n                          ActivityKeys.sessionKey\r\n                        }&language=0&questionKey=${id}${answerToChange\r\n                          .map((answer) => `&${answer[0]}=${answer[1]}`)\r\n                          .join(\"\")}`,\r\n                        method: \"POST\",\r\n                      }\r\n                    )\r\n                      .then((res) => res.json())\r\n                      .then((res) => {\r\n                        // console.log(res);\r\n                      });\r\n                  };\r\n\r\n                  try {\r\n                    const ltiLaunchResponse = await fetch(\r\n                      `https://${prefix}.core.learn.edgenuity.com/Player/LTILaunch`,\r\n                      {\r\n                        headers: {\r\n                          \"content-type\": \"application/x-www-form-urlencoded\",\r\n                        },\r\n                        body: Object.keys(initialization.InitialLaunchData)\r\n                          .map(\r\n                            (key) =>\r\n                              `${key}=${encodeURIComponent(\r\n                                initialization.InitialLaunchData[key]\r\n                              )}`\r\n                          )\r\n                          .join(\"&\"),\r\n                        method: \"POST\",\r\n                      }\r\n                    );\r\n\r\n                    const ltiLaunchHtml = await ltiLaunchResponse.text();\r\n                    const parser = new DOMParser();\r\n                    const html = parser.parseFromString(\r\n                      ltiLaunchHtml,\r\n                      \"text/html\"\r\n                    );\r\n                    const form = html.querySelector(\"form\");\r\n                    const formData = new FormData(form);\r\n                    const data = Object.fromEntries(formData);\r\n                    console.log(\"Data:\", data);\r\n\r\n                    const ltiLoginResponse = await fetch(\r\n                      `https://${prefix}.core.learn.edgenuity.com/contentviewers/ltilogin`,\r\n                      {\r\n                        headers: {\r\n                          \"content-type\": \"application/x-www-form-urlencoded\",\r\n                        },\r\n                        body: Object.keys(data)\r\n                          .map(\r\n                            (key) => `${key}=${encodeURIComponent(data[key])}`\r\n                          )\r\n                          .join(\"&\"),\r\n                        method: \"POST\",\r\n                      }\r\n                    );\r\n\r\n                    const ltiLoginHtml = await ltiLoginResponse.text();\r\n                    const loginHtml = parser.parseFromString(\r\n                      ltiLoginHtml,\r\n                      \"text/html\"\r\n                    );\r\n                    const launchData =\r\n                      loginHtml.getElementById(\"launchdata\").value;\r\n                    console.log(\r\n                      \"Launch Data:\",\r\n                      `${launchData.substring(0, 10)}...`\r\n                    );\r\n\r\n                    const activityResponse = await fetch(\r\n                      `https://${prefix}.core.learn.edgenuity.com/ContentViewers/AssessmentViewer/Activity`,\r\n                      {\r\n                        headers: {\r\n                          \"content-type\": \"application/x-www-form-urlencoded\",\r\n                        },\r\n                        body: `launchdata=${launchData}`,\r\n                        method: \"POST\",\r\n                      }\r\n                    );\r\n\r\n                    const activityHtml = await activityResponse.text();\r\n                    const parsedHtml = parser.parseFromString(\r\n                      activityHtml,\r\n                      \"text/html\"\r\n                    );\r\n\r\n                    const ids = Array.from(\r\n                      parsedHtml.querySelectorAll(\".question-buttons ol li\")\r\n                    )\r\n                      .slice(1, -1)\r\n                      .map((li) => li.id);\r\n\r\n                    console.log(\"Ids:\", ids);\r\n                    let parsedAnswers = [];\r\n                    // const keyFromGM = GM_getValue(\"user_key\", null);\r\n                    // console.log(\"Key From GM:\", keyFromGM);\r\n                    // const userId = getUserID() || \"null\";\r\n                    // console.log(\"User ID:\", userId);\r\n                    // const dbAnswers = await retrieveAnswersFromDB(\r\n                    //   ids,\r\n                    //   keyFromGM,\r\n                    //   userId\r\n                    // );\r\n                    // parsedAnswers = JSON.parse(dbAnswers.responseText);\r\n\r\n                    // parsedAnswers = parsedAnswers.map((x) => {\r\n                    //   if (x.question_id.startsWith(\"nq:\")) {\r\n                    //     x.question_id = x.question_id.slice(3);\r\n                    //   }\r\n                    //   return x;\r\n                    // });\r\n\r\n                    const ActivityKeys = {};\r\n                    parsedHtml.querySelectorAll(\"script\").forEach((script) => {\r\n                      const scriptContent = script.textContent;\r\n                      if (scriptContent.includes(\"ActivityKeys\")) {\r\n                        const keys = scriptContent.match(\r\n                          /this\\.[a-zA-Z]+Key = \"(.*?)\";/g\r\n                        );\r\n                        keys.forEach((key) => {\r\n                          const keyName = key.match(/this\\.([a-zA-Z]+Key)/)[1];\r\n                          const keyValue = key.match(/\"([^\"]+)\"/)[1];\r\n                          ActivityKeys[keyName] = keyValue;\r\n                        });\r\n                      }\r\n                    });\r\n\r\n                    console.log(\"Activity Keys:\", ActivityKeys);\r\n\r\n                    await Promise.all(\r\n                      ids.map((id) =>\r\n                        loadQuestion(id, parsedAnswers, ActivityKeys)\r\n                      )\r\n                    );\r\n\r\n                    await fetch(\r\n                      `https://${prefix}.core.learn.edgenuity.com/contentengineapi/api/assessment/SubmitAssessmentSimpleResponse?learningObjectKey=${ActivityKeys.learningObjectKey}&resultKey=${ActivityKeys.resultKey}&enrollmentKey=${ActivityKeys.enrollmentKey}&sessionKey=${ActivityKeys.sessionKey}&autoSubmitted=false&UpdateLastTime=true`\r\n                    );\r\n\r\n                    // window.location.reload();\r\n                  } catch (error) {\r\n                    console.error(\"Error in overlay click handler:\", error);\r\n                  }\r\n                };\r\n                clearInterval(waitForContainer);\r\n              }\r\n            };\r\n\r\n            waitForContainer = setInterval(intervalFunc, 3000);\r\n          }\r\n\r\n          // Check if eNotes button exists and activity type starts with 'A'\r\n          const eNotesBtn = document.getElementById(\"aEnotes\");\r\n          if (nextActivityData.NextObjectType?.startsWith(\"A\") && eNotesBtn) {\r\n            eNotesBtn.click();\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error fetching next activity data:\", error);\r\n        }\r\n      });\r\n    }\r\n\r\n    initDraggableMenu((conf) => {\r\n      console.log(\"Config:\", conf);\r\n      config = conf;\r\n    });\r\n\r\n    const stageFrame = getStageFrame();\r\n    if (!stageFrame) return;\r\n\r\n    interval = setInterval(async () => {\r\n      if (stop) {\r\n        console.log(\"Stopping script because pastContent is detected.\");\r\n        clearInterval(interval);\r\n        return;\r\n      }\r\n\r\n      const examTitle = document.getElementById(\"activity-title\")?.innerText;\r\n      if (\r\n        !examTitle ||\r\n        document.getElementById(\"activity-status\")?.innerText === \"Complete\"\r\n      ) {\r\n        const journalText = stageFrame?.contentWindow.document\r\n          .getElementById(\"journal-ckeditor\")\r\n          ?.innerText?.trim();\r\n        const linkText = stageFrame?.contentWindow.document\r\n          .querySelector(\".OnlineContent-textArea-div\")\r\n          ?.innerText?.trim();\r\n\r\n        let pastContent = journalText || linkText;\r\n        console.log(\"Completed!!!!!!!\", pastContent);\r\n        if (pastContent) {\r\n          stop = true;\r\n          const scores = 77;\r\n          displayHumanElement(\"Human Score\", scores);\r\n          clearInterval(interval); // Stop execution\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (!config.isActive) {\r\n        console.log(\"Start button not clicked yet.\");\r\n        return;\r\n      }\r\n\r\n      if (!stageFrame.contentWindow?.CKEDITOR) {\r\n        console.log(\"CKEditor not displayed!!!!!\");\r\n        return;\r\n      }\r\n\r\n      const links = stageFrame.contentDocument?.querySelectorAll(\r\n        \"#contentViewer #OnlineContent-Links .weblink\"\r\n      );\r\n      console.log(\"Links:\", links);\r\n\r\n      if (!links?.length) {\r\n        clearInterval(interval);\r\n        const text =\r\n          stageFrame.contentWindow.document.getElementById(\"journal-prompt\") ||\r\n          stageFrame.contentWindow.document.querySelector(\r\n            \".text-box-container\"\r\n          );\r\n        const editor =\r\n          stageFrame.contentWindow.CKEDITOR.instances[\"Answer\"] ||\r\n          stageFrame.contentWindow.CKEDITOR.instances[\"essay-Content\"];\r\n\r\n        try {\r\n          displayHumanElement(\"Human Score\");\r\n\r\n          // Create a promise that resolves after placeholder typing or immediately if disabled\r\n          const placeholderPromise =\r\n            config.placeholder === \"Enabled\"\r\n              ? new Promise((resolve) => {\r\n                  const placeholderText =\r\n                    \"This topic has many sides to consider, each offering unique insights required to understand.\";\r\n                  editor.setData(\"\"); // Clear any existing content\r\n                  createTypingAnimation(\r\n                    editor,\r\n                    placeholderText,\r\n                    { ...config, typingStyle: \"None\" },\r\n                    () => {\r\n                      // Then backspace it character by character\r\n                      let text = placeholderText;\r\n                      const backspaceInterval = setInterval(() => {\r\n                        if (text.length > 0) {\r\n                          text = text.slice(0, -1);\r\n                          editor.setData(text);\r\n                        } else {\r\n                          clearInterval(backspaceInterval);\r\n                          resolve();\r\n                        }\r\n                      }, 50); // Backspace every 50ms\r\n                    }\r\n                  );\r\n                })\r\n              : Promise.resolve();\r\n\r\n          // Wait for both placeholder typing and 5-second delay\r\n          const [res, _] = await Promise.all([\r\n            getAnswer(text?.innerText),\r\n            placeholderPromise,\r\n          ]);\r\n          console.log(res);\r\n          const answer = res.humanizedText;\r\n          console.log(\"Journal Answer:\", answer);\r\n\r\n          const response = await getHumanScore(answer);\r\n          const scores = response.humanScore;\r\n          console.log(\"Journal scores:\", scores);\r\n          displayHumanElement(\"Human Score\", scores);\r\n\r\n          createTypingAnimation(\r\n            editor,\r\n            answer,\r\n            {\r\n              ...config,\r\n              placeholder: \"Disabled\",\r\n            },\r\n            () => {\r\n              const submitBtn =\r\n                stageFrame.contentWindow.document.getElementById(\r\n                  \"SubmitButton\"\r\n                ) ||\r\n                stageFrame.contentWindow.document.querySelector(\r\n                  \".uibtn.uibtn-blue.uibtn-med.uibtn-alt\"\r\n                );\r\n              submitBtn.disabled = false;\r\n              submitWriting(submitBtn, text?.innerText, answer, scores);\r\n            }\r\n          );\r\n        } catch (error) {\r\n          console.error(\"Error:\", error);\r\n        }\r\n      } else {\r\n        console.log(\"Links length:\", links.length);\r\n        clearInterval(interval);\r\n        let answered = 0;\r\n        const needToAnswer = Object.keys(\r\n          stageFrame.contentWindow.CKEDITOR.instances\r\n        ).length;\r\n        console.log(\"needToAnswer:\", needToAnswer);\r\n\r\n        Object.keys(stageFrame.contentWindow.CKEDITOR.instances).forEach(\r\n          async (key) => {\r\n            const editor = stageFrame.contentWindow.CKEDITOR.instances[key];\r\n            const question = stageFrame.contentDocument\r\n              .getElementById(editor.name)\r\n              ?.parentElement?.querySelector(\"p\")?.innerText;\r\n            console.log(\"Question:\", question);\r\n\r\n            try {\r\n              // Create a promise for placeholder typing\r\n              const placeholderPromise =\r\n                config.placeholder === \"Enabled\"\r\n                  ? new Promise((resolve) => {\r\n                      const placeholderText =\r\n                        \"This topic has many sides to consider, each offering unique insights required to understand.\";\r\n                      editor.setData(\"\"); // Clear any existing content\r\n\r\n                      // First type the placeholder text\r\n                      createTypingAnimation(\r\n                        editor,\r\n                        placeholderText,\r\n                        { ...config, typingStyle: \"None\" },\r\n                        () => {\r\n                          // Then backspace it character by character\r\n                          let text = placeholderText;\r\n                          const backspaceInterval = setInterval(() => {\r\n                            if (text.length > 0) {\r\n                              text = text.slice(0, -1);\r\n                              editor.setData(text);\r\n                            } else {\r\n                              clearInterval(backspaceInterval);\r\n                              resolve();\r\n                            }\r\n                          }, 50); // Backspace every 50ms\r\n                        }\r\n                      );\r\n                    })\r\n                  : Promise.resolve();\r\n\r\n              let siteNumber = question\r\n                ?.match(/\\( *Site *[0-9]+ *\\)/g)\r\n                ?.join(\"\");\r\n              siteNumber = siteNumber?.replace(/\\( *Site *([0-9]+) *\\)/, \"$1\");\r\n\r\n              let answers = [],\r\n                questions = [];\r\n\r\n              const endpoint = siteNumber\r\n                ? links[parseInt(siteNumber) - 1]?.getAttribute(\"href\")\r\n                : links[0]?.getAttribute(\"href\");\r\n\r\n              const response = await fetch(endpoint);\r\n              const aRes = await response.text();\r\n              const parser = new DOMParser();\r\n              const doc = parser.parseFromString(aRes, \"text/html\");\r\n\r\n              doc.querySelector(\"footer\")?.remove();\r\n\r\n              const extractedText = [\"h1\", \"h2\", \"p\", \"li\"].reduce(\r\n                (acc, tag) => {\r\n                  Array.from(doc.getElementsByTagName(tag)).forEach(\r\n                    (element) => {\r\n                      acc += element.textContent?.trim() + \" \";\r\n                    }\r\n                  );\r\n                  return acc.trim();\r\n                },\r\n                \"\"\r\n              );\r\n\r\n              const examTitle =\r\n                document.getElementById(\"activity-title\")?.innerText;\r\n              if (\r\n                examTitle === \"Online Content\" &&\r\n                GM_getValue(\"settings\") &&\r\n                GM_getValue(\"settings\")[\"auto-writing-use\"] ===\r\n                  \"Keywords (100% Accuracy)\"\r\n              ) {\r\n                editor.setData(extractedText);\r\n                answered++;\r\n              } else {\r\n                displayHumanElement(\"Human Score\");\r\n\r\n                //   const answer = `The High Renaissance – my most favored period in art history. It's just the coolest thing, isn't it? The years from 15th to 17th century Italy Florence, Rome and Venice were home to some of the most iconic artists and works we see among us that inspires us till the date.\r\n                // The High Renaissance – my most favored period in art history. It's just the coolest thing, isn't it? The years from 15th to 17th century Italy Florence, Rome and Venice were home to some of the most iconic artists and works we see among us that inspires us till the date.\r\n                // The High Renaissance – my most favored period in art history. It's just the coolest thing, isn't it? The years from 15th to 17th century Italy Florence, Rome and Venice were home to some of the most iconic artists and works we see among us that inspires us till the date.\r\n                // `;\r\n\r\n                // Wait for both placeholder typing and 5-second delay\r\n                const [res, _] = await Promise.all([\r\n                  getAnswer(extractedText),\r\n                  placeholderPromise,\r\n                ]);\r\n\r\n                const answer = res.humanizedText;\r\n                console.log(\"Online Content Answer:\", answer);\r\n\r\n                const response = await getHumanScore(answer);\r\n                const scores = response.humanScore;\r\n                console.log(\"Online Content scores:\", scores);\r\n                displayHumanElement(\"Human Score\", scores);\r\n                answers.push(answer);\r\n                questions.push(question);\r\n\r\n                if (!config.isActive) {\r\n                  editor.setData(answer);\r\n                  answered++;\r\n                } else {\r\n                  createTypingAnimation(editor, answer, config, () => {\r\n                    answered++;\r\n                    if (answered === needToAnswer) {\r\n                      const submitBtn =\r\n                        stageFrame.contentWindow.document.getElementById(\r\n                          \"SubmitQuestionsButton\"\r\n                        );\r\n                      submitBtn.disabled = false;\r\n                      submitWriting(submitBtn, questions, answers, scores);\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n            } catch (error) {\r\n              console.error(\"Error processing answer:\", error);\r\n            }\r\n          }\r\n        );\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  activateAutomaticWriting();\r\n})();\r\n"],"names":[],"sourceRoot":""}